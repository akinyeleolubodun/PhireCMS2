<?php include __DIR__ . '/../header.phtml'; ?>
<?php echo $nav; ?>
    <h1 style="color: #00f;"><?php echo $title; ?></h1>
<?php if ($acl->isAuth('Phire\Controller\Phire\User\UsersController', 'add')): ?>
    <p><a href="<?php echo BASE_PATH . APP_URI; ?>/users/add<?php echo ((isset($typeId) && (null !== $typeId)) ? '/' . $typeId : null); ?>">[+] Add</a></p>
<?php endif; ?>
<?php
if (isset($form)):
    if (isset($error))
        echo '    <h4 class="error">' . $error . '</h4>' . PHP_EOL;
    echo $form;
elseif (isset($table)):
    echo $table;
elseif (isset($types) && isset($types[0])): ?>
    <table class="data-table" cellpadding="0" cellspacing="0" border="0" style="border-bottom: solid 1px #ccc;">
        <tr><th>User Types</th></tr>
        <?php foreach ($types as $type): ?>
            <tr><td style="border-left: solid 1px #ccc; border-right: solid 1px #ccc;"><a href="<?php echo BASE_PATH . APP_URI; ?>/users/index/<?php echo $type->id; ?>"><?php echo $type->type;?></a></td></tr>
        <?php endforeach; ?>
    </table>
<?php else: ?>
    <p>There are currently no users. You can add <a href="<?php echo BASE_PATH . APP_URI; ?>/users/add<?php echo ((isset($typeId) && (null !== $typeId)) ? '/' . $typeId : null); ?>">a user here</a> or add <a href="<?php echo BASE_PATH . APP_URI; ?>/users/types/add">a user type here</a>.</p>
<?php endif; ?>
<?php include __DIR__ . '/../footer.phtml'; ?>